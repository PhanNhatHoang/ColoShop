<!DOCTYPE html>
<html lang="en">

<head th:fragment="header">
    <title>Colo Shop Manger</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Colo Shop Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Rubik:400,400i,500,500i,700,700i&amp;display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900&amp;display=swap"
          rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/Admin/Css/font-awesome.css">
    <!-- ico-font-->
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/icofont.css">
    <!-- Themify icon-->
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/themify.css">
    <!-- Flag icon-->
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/flag-icon.css">
    <!-- Feather icon-->
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/feather-icon.css">
    <!-- Plugins css start-->
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/scrollbar.css">
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/animate.css">
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/chartist.css">
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/owlcarousel.css">
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/prism.css">
    <!-- Plugins css Ends-->
    <!-- Bootstrap css-->
    <link rel="stylesheet" type="text/css" href="/Admin/Css/vendors/bootstrap.css">
    <!-- App css-->
    <link rel="stylesheet" type="text/css" href="/Admin/Css/style.css">
    <link id="color" rel="stylesheet" href="/Admin/Css/color-1.css" media="screen">
    <!-- Responsive css-->
    <link rel="stylesheet" type="text/css" href="/Admin/Css/responsive.css">
    <link rel="stylesheet" type="text/css" href="/User/styles/bootstrap4/bootstrap.min.css">
    <link href="/User/plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/User/plugins/OwlCarousel2-2.2.1/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="/User/plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
    <link rel="stylesheet" type="text/css" href="/User/plugins/OwlCarousel2-2.2.1/animate.css">
    <link rel="stylesheet" type="text/css" href="/User/plugins/jquery-ui-1.12.1.custom/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="/User/styles/categories_styles.css">
    <link rel="stylesheet" type="text/css" href="/User/styles/categories_responsive.css">
</head>

<body>

<div class="super_container">

    <!-- Header -->

    <header class="header trans_300" th:fragment="main-header">

        <!-- Top Navigation -->

        <div class="top_nav">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <div class="top_nav_left">free shipping on all u.s orders over $50</div>
                    </div>
                    <div class="col-md-6 text-right">
                        <div class="top_nav_right">
                            <ul class="top_nav_menu">
                                <li class="account">
                                    <a href="#">
                                        My Account
                                        <i class="fa fa-angle-down"></i>
                                    </a>
                                    <ul class="account_selection" th:if="${session.user == null}">
                                        <li><a href="/Login"><i class="fa fa-sign-in" aria-hidden="true"></i>Sign In</a></li>
                                        <li><a href="/SignUp"><i class="fa fa-user-plus" aria-hidden="true"></i>Register</a></li>
                                    </ul>
                                    <ul class="account_selection" th:if="${session.user != null and session.role == 'Admin'}">
                                        <li><a th:text="${session.user.fullname}"></a></li>
                                        <li><a href="/categories">Page Admin</a></li>
                                        <li><a href="/logout"><i class="fa fa-sign-out" aria-hidden="true"></i>Log Out</a></li>
                                    </ul>
                                    <ul class="account_selection" th:if="${session.user != null and session.role == 'User'}">
                                        <li><a th:text="${session.user.fullname}"></a></li>
                                        <li><a href="/logout"><i class="fa fa-sign-out" aria-hidden="true"></i>Log Out</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Navigation -->

        <div class="main_nav_container">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-right">
                        <div class="logo_container">
                            <a href="/shop">colo<span>shop</span></a>
                        </div>
                        <nav class="navbar">
                            <ul class="navbar_menu">
                                <!--<li ><a href="#">home</a></li>-->
                                <li ><a href="/shop">shop</a></li>
                                <li ><a href="/contacts">contact</a></li>
                            </ul>
                            <ul class="navbar_user">
                                <li><a href="/Info"><i class="fa fa-user" aria-hidden="true"></i></a></li>
                                <li class="checkout">
                                    <a href="/Cart">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </a>
                                </li>
                            </ul>
                            <div class="hamburger_container">
                                <i class="fa fa-bars" aria-hidden="true"></i>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

    </header>

    <div class="fs_menu_overlay"></div>

    <!-- Hamburger Menu -->

    <div class="hamburger_menu" th:fragment ="hamburger_menu">
        <div class="hamburger_close"><i class="fa fa-times" aria-hidden="true"></i></div>
        <div class="hamburger_menu_content text-right">
            <ul class="menu_top_nav">
                <li class="menu_item has-children">
                    <a href="#">
                        My Account
                        <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="menu_selection" th:if="${session.user == null}">
                        <li><a href="/Login"><i class="fa fa-sign-in" aria-hidden="true"></i>Sign In</a></li>
                        <li><a href="/SignUp"><i class="fa fa-user-plus" aria-hidden="true"></i>Register</a></li>
                    </ul>
                    <ul class="menu_selection" th:if="${session.user != null and session.role == 'Admin'}">
                        <li><a th:text="${session.user.fullname}"></a></li>
                        <li><a href="/categories">Page Admin</a></li>
                        <li><a href="/logout"><i class="fa fa-sign-out" aria-hidden="true"></i>Log Out</a></li>
                    </ul>
                    <ul class="menu_selection" th:if="${session.user != null and session.role == 'User'}">
                        <li><a th:text="${session.user.fullname}"></a></li>
                        <li><a href="/logout"><i class="fa fa-sign-out" aria-hidden="true"></i>Log Out</a></li>
                    </ul>
                </li>
                <li class="menu_item"><a href="#">home</a></li>
                <li class="menu_item"><a href="/shop">shop</a></li>
                <li class="menu_item"><a href="/contacts">contact</a></li>
            </ul>
        </div>
    </div>

    <div class="container product_section_container">
        <div class="row">
            <div class="col product_section clearfix">

                <!-- Breadcrumbs -->

                <div class="breadcrumbs d-flex flex-row align-items-center">
                </div>
                <!-- Main Content -->
                <div class="container contact_container">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Cart</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="order-history table-responsive wishlist">
                                            <table class="table table-bordered">
                                                <thead>
                                                <tr>
                                                    <th>Prdouct</th>
                                                    <th>Prdouct Name</th>
                                                    <th>Price</th>
                                                    <th>Quantity</th>
                                                    <th>Action</th>
                                                    <th>Total</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr th:each="CartItem : ${cartItems}">
                                                    <td>
                                                        <img class="img-fluid img-40"
                                                             th:src="@{'data:image/jpeg;base64,' + ${CartItem.product.image}}"
                                                             >
                                                    </td>
                                                    <td>
                                                        <div class="product-name"><a href="#"
                                                                                     th:text="${CartItem.product.name}"></a></div>
                                                    </td>
                                                    <td th:text="${CartItem.product.saleprice}"
                                                        class="salePrice"></td>
                                                    <td>

                                                        <form action="/updateQuantity" method="post">
                                                            <fieldset class="qty-box">
                                                                <div class="input-group">
                                                            <input type="hidden" name="cartItemId" th:value="${CartItem.id}">
                                                            <button type="submit" name="change" value="-">-</button>
                                                            <input class="quantity" type="number" readonly th:value="${CartItem.quantity}">
                                                            <button type="submit" name="change" value="+" >+</button>
                                                                </div>
                                                            </fieldset>
                                                        </form>

                                                    </td>
                                                    <td>
                                                        <a class="btn btn-sm btn-primary"
                                                           th:attr="onclick='deleteContact(\'' + ${CartItem.id} + '\')'">Delete</a>
                                                    </td>
                                                    <!--<td><i class="remove-cart-item" data-cart-item-id="${CartItem.id}" data-cart-item-index="${cartItemStat.index}" data-feather="x-circle"></i></td>-->
                                                    <!-- Thêm một cột để hiển thị tổng tiền cho mỗi sản phẩm -->
                                                    <td class="total-for-item" th:text="${CartItem.totalPrice}">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4">

                                                    </td>
                                                    <td class="total-amount">
                                                        <h6 class="m-0 text-end"><span class="f-w-600">Total Price:</span></h6>
                                                    </td>
                                                    <td><span th:text="'$'+ ${total}"> </span></td>
                                                </tr>
                                                <tr>
                                                    <td class="text-end" colspan="5"><a
                                                            class="btn btn-secondary cart-btn-transform"
                                                            href="/shop">continue shopping</a></td>

                                                    <td>
                                                        <form action="/checkOut" method="post">
                                                            <button type="submit" class="btn btn-success">Check Out</button>
                                                        </form>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!-- Container-fluid Ends-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<!-- Benefit -->

<div class="benefit">
    <div class="container">
        <div class="row benefit_row">
            <div class="col-lg-3 benefit_col">
                <div class="benefit_item d-flex flex-row align-items-center">
                    <div class="benefit_icon"><i class="fa fa-truck" aria-hidden="true"></i></div>
                    <div class="benefit_content">
                        <h6>free shipping</h6>
                        <p>Suffered Alteration in Some Form</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 benefit_col">
                <div class="benefit_item d-flex flex-row align-items-center">
                    <div class="benefit_icon"><i class="fa fa-money" aria-hidden="true"></i></div>
                    <div class="benefit_content">
                        <h6>cach on delivery</h6>
                        <p>The Internet Tend To Repeat</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 benefit_col">
                <div class="benefit_item d-flex flex-row align-items-center">
                    <div class="benefit_icon"><i class="fa fa-undo" aria-hidden="true"></i></div>
                    <div class="benefit_content">
                        <h6>45 days return</h6>
                        <p>Making it Look Like Readable</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 benefit_col">
                <div class="benefit_item d-flex flex-row align-items-center">
                    <div class="benefit_icon"><i class="fa fa-clock-o" aria-hidden="true"></i></div>
                    <div class="benefit_content">
                        <h6>opening all week</h6>
                        <p>8AM - 09PM</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



</div>

<div th:fragment="script">
    <script src="/User/js/jquery-3.2.1.min.js"></script>
    <script src="/User/styles/bootstrap4/popper.js"></script>
    <script src="/User/styles/bootstrap4/bootstrap.min.js"></script>
    <script src="/User/plugins/Isotope/isotope.pkgd.min.js"></script>
    <script src="/User/plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
    <script src="/User/plugins/easing/easing.js"></script>
    <script src="/User/plugins/jquery-ui-1.12.1.custom/jquery-ui.js"></script>
    <script src="/User/js/categories_custom.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>

    <script src="/Admin/JS/jquery-3.5.1.min.js"></script>
    <!-- Bootstrap js-->
    <script src="/Admin/JS/bootstrap/bootstrap.bundle.min.js"></script>
    <!-- feather icon js-->
    <script src="/Admin/JS/icons/feather-icon/feather.min.js"></script>
    <script src="/Admin/JS/icons/feather-icon/feather-icon.js"></script>
    <!-- scrollbar js-->
    <script src="/Admin/JS/scrollbar/simplebar.js"></script>
    <script src="/Admin/JS/scrollbar/custom.js"></script>
    <!-- Sidebar jquery-->
    <script src="/Admin/JS/config.js"></script>
    <!-- Plugins JS start-->
    <script src="/Admin/JS/sidebar-menu.js"></script>
    <script src="/Admin/JS/prism/prism.min.js"></script>
    <script src="/Admin/JS/clipboard/clipboard.min.js"></script>
    <script src="/Admin/JS/counter/jquery.waypoints.min.js"></script>
    <script src="/Admin/JS/counter/jquery.counterup.min.js"></script>
    <script src="/Admin/JS/counter/counter-custom.js"></script>
    <script src="/Admin/JS/owlcarousel/owl.carousel.js"></script>
    <script src="/Admin/JS/tooltip-init.js"></script>
</div>
<script th:inline="javascript">
    function deleteContact(ContactId) {
        if (confirm('Bạn có chắc chắn muốn xóa vai trò này không?')) {
            fetch('/remove/' + ContactId, {
                method: 'DELETE'
            })
                .then(response => {
                    if (response.ok) {
                        // Thực hiện các hành động cần thiết sau khi xóa vai trò, ví dụ: cập nhật giao diện
                        alert('Đã xảy ra lỗi khi xóa vai trò.');
                         // Tải lại trang để cập nhật danh sách vai trò
                    } else {
                        alert('Vai trò đã được xóa thành công.');
                        location.reload();
                    }
                })
                .catch(error => console.error('Error:', error));
        }
    }
</script>
</body>

</html>